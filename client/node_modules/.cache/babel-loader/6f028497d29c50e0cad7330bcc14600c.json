{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Github shit\\\\react-ecommerce\\\\client\\\\src\\\\Component\\\\stripe\\\\CheckoutForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./Stripe.css\";\nimport { connect } from \"react-redux\";\nimport { clearCart } from \"../Redux/cart/cartAction\";\nimport { paymentStart } from \"../Redux/Stripe/Stripe.Actions\";\nconst CARD_ELEMENT_OPTIONS = {\n  iconStyle: \"solid\",\n  style: {\n    base: {\n      iconColor: \"#c4f0ff\",\n      color: \"#fff\",\n      fontWeight: 500,\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n      fontSize: \"16px\",\n      fontSmoothing: \"antialiased\",\n      \":-webkit-autofill\": {\n        color: \"#fce883\"\n      },\n      \"::placeholder\": {\n        color: \"#87bbfd\"\n      }\n    },\n    invalid: {\n      iconColor: \"#ffc7ee\",\n      color: \"#ffc7ee\"\n    }\n  }\n};\n\nconst CardField = ({\n  onChange\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"FormRow\",\n  children: [\"Card details\", /*#__PURE__*/_jsxDEV(CardElement, {\n    options: CARD_ELEMENT_OPTIONS,\n    onChange: onChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 31,\n  columnNumber: 3\n}, this);\n\n_c = CardField;\n\nconst Field = ({\n  id,\n  label,\n  autoComplete,\n  value,\n  type,\n  required,\n  onChange,\n  placeHolder\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"FormRow\",\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    htmlFor: id,\n    className: \"FormRowLabel\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    className: \"FormRowInput\",\n    type: type,\n    value: value,\n    autoComplete: autoComplete,\n    required: required,\n    onChange: onChange,\n    placeholder: placeHolder\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 47,\n  columnNumber: 3\n}, this);\n\n_c2 = Field;\n\nconst SubmitButton = ({\n  children,\n  processing,\n  error,\n  disabled,\n  onClick\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  className: `SubmitButton ${error ? \"SubmitButtonError\" : \"\"}`,\n  type: \"submit\",\n  disabled: processing || disabled,\n  onClick: onClick,\n  children: processing ? \"Processing\" : children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 63,\n  columnNumber: 3\n}, this);\n\n_c3 = SubmitButton;\n\nconst ErrorMessage = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"ErrorMessage\",\n  role: \"alert\",\n  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 17 17\",\n    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n      fill: \"#FFF\",\n      d: \"M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      fill: \"#6772e5\",\n      d: \"M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this), children]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 73,\n  columnNumber: 3\n}, this);\n\n_c4 = ErrorMessage;\n\nconst CheckoutForm = ({\n  priceStripe,\n  history,\n  clearCart,\n  startPayment\n}) => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const [processing, setProcessing] = useState(false);\n  const [error, setError] = useState(null);\n  const [cardComplete, setCardComplete] = useState(false);\n  const [billingDetails, setBillingDetails] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\"\n  });\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    if (cardComplete) {\n      setProcessing(true);\n    }\n\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n      billing_details: billingDetails\n    });\n\n    if (error) {\n      setError(error);\n    } else {\n      axios({\n        url: \"payment\",\n        method: \"post\",\n        data: {\n          amount: priceStripe,\n          paymentMethod: paymentMethod\n        }\n      }).then(res => {\n        setProcessing(false);\n        alert(\"Your payment was successful\");\n        clearCart();\n        history.push(\"/\");\n      }).catch(error => console.log(\"payment error\", error));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"Form\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"FormGroup\",\n      children: [/*#__PURE__*/_jsxDEV(Field, {\n        label: \"Name\",\n        id: \"name\",\n        type: \"text\",\n        placeholder: \"Jane Doe\",\n        required: true,\n        autoComplete: \"name\",\n        value: billingDetails.name,\n        onChange: e => setBillingDetails({ ...billingDetails,\n          name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Field, {\n        label: \"Email\",\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"janedoe@gmail.com\",\n        required: true,\n        autoComplete: \"email\",\n        value: billingDetails.email,\n        onChange: e => {\n          setBillingDetails({ ...billingDetails,\n            email: e.target.value\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Field, {\n        label: \"Phone\",\n        id: \"phone\",\n        type: \"tel\",\n        placeholder: \"(941) 555-0123\",\n        required: true,\n        autoComplete: \"tel\",\n        value: billingDetails.phone,\n        onChange: e => {\n          setBillingDetails({ ...billingDetails,\n            phone: e.target.value\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"FormGroup\",\n      children: /*#__PURE__*/_jsxDEV(CardField, {\n        onChange: e => {\n          setError(e.error);\n          setCardComplete(e.complete);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      processing: processing,\n      error: error,\n      disabled: !stripe,\n      onClick: startPayment(),\n      children: \"Pay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CheckoutForm, \"2d39PXHhHuern3NQyISehj9x2S8=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c5 = CheckoutForm;\n\nconst mapDispatchToProps = dispatch => ({\n  clearCart: () => dispatch(clearCart()),\n  startPayment: () => dispatch(paymentStart())\n});\n\nexport default connect(null, mapDispatchToProps)(withRouter(CheckoutForm));\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CardField\");\n$RefreshReg$(_c2, \"Field\");\n$RefreshReg$(_c3, \"SubmitButton\");\n$RefreshReg$(_c4, \"ErrorMessage\");\n$RefreshReg$(_c5, \"CheckoutForm\");","map":{"version":3,"sources":["D:/Github shit/react-ecommerce/client/src/Component/stripe/CheckoutForm.js"],"names":["React","useState","CardElement","useStripe","useElements","withRouter","axios","connect","clearCart","paymentStart","CARD_ELEMENT_OPTIONS","iconStyle","style","base","iconColor","color","fontWeight","fontFamily","fontSize","fontSmoothing","invalid","CardField","onChange","Field","id","label","autoComplete","value","type","required","placeHolder","SubmitButton","children","processing","error","disabled","onClick","ErrorMessage","CheckoutForm","priceStripe","history","startPayment","stripe","elements","setProcessing","setError","cardComplete","setCardComplete","billingDetails","setBillingDetails","name","email","phone","handleSubmit","event","preventDefault","paymentMethod","createPaymentMethod","card","getElement","billing_details","url","method","data","amount","then","res","alert","push","catch","console","log","e","target","complete","message","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport \"./Stripe.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearCart } from \"../Redux/cart/cartAction\";\r\nimport { paymentStart } from \"../Redux/Stripe/Stripe.Actions\";\r\nconst CARD_ELEMENT_OPTIONS = {\r\n  iconStyle: \"solid\",\r\n  style: {\r\n    base: {\r\n      iconColor: \"#c4f0ff\",\r\n      color: \"#fff\",\r\n      fontWeight: 500,\r\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\r\n      fontSize: \"16px\",\r\n      fontSmoothing: \"antialiased\",\r\n      \":-webkit-autofill\": { color: \"#fce883\" },\r\n      \"::placeholder\": { color: \"#87bbfd\" },\r\n    },\r\n    invalid: {\r\n      iconColor: \"#ffc7ee\",\r\n      color: \"#ffc7ee\",\r\n    },\r\n  },\r\n};\r\n\r\nconst CardField = ({ onChange }) => (\r\n  <div className=\"FormRow\">\r\n    Card details\r\n    <CardElement options={CARD_ELEMENT_OPTIONS} onChange={onChange} />\r\n  </div>\r\n);\r\n\r\nconst Field = ({\r\n  id,\r\n  label,\r\n  autoComplete,\r\n  value,\r\n  type,\r\n  required,\r\n  onChange,\r\n  placeHolder,\r\n}) => (\r\n  <div className=\"FormRow\">\r\n    <label htmlFor={id} className=\"FormRowLabel\">\r\n      {label}\r\n    </label>\r\n    <input\r\n      className=\"FormRowInput\"\r\n      type={type}\r\n      value={value}\r\n      autoComplete={autoComplete}\r\n      required={required}\r\n      onChange={onChange}\r\n      placeholder={placeHolder}\r\n    />\r\n  </div>\r\n);\r\nconst SubmitButton = ({ children, processing, error, disabled, onClick }) => (\r\n  <button\r\n    className={`SubmitButton ${error ? \"SubmitButtonError\" : \"\"}`}\r\n    type=\"submit\"\r\n    disabled={processing || disabled}\r\n    onClick={onClick}\r\n  >\r\n    {processing ? \"Processing\" : children}\r\n  </button>\r\n);\r\nconst ErrorMessage = ({ children }) => (\r\n  <div className=\"ErrorMessage\" role=\"alert\">\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 17 17\">\r\n      <path\r\n        fill=\"#FFF\"\r\n        d=\"M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z\"\r\n      />\r\n      <path\r\n        fill=\"#6772e5\"\r\n        d=\"M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z\"\r\n      />\r\n    </svg>\r\n    {children}\r\n  </div>\r\n);\r\nconst CheckoutForm = ({ priceStripe, history, clearCart, startPayment }) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [processing, setProcessing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [cardComplete, setCardComplete] = useState(false);\r\n  const [billingDetails, setBillingDetails] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n  });\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!stripe || !elements) {\r\n      return;\r\n    }\r\n\r\n    if (cardComplete) {\r\n      setProcessing(true);\r\n    }\r\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n      type: \"card\",\r\n      card: elements.getElement(CardElement),\r\n      billing_details: billingDetails,\r\n    });\r\n    if (error) {\r\n      setError(error);\r\n    } else {\r\n      axios({\r\n        url: \"payment\",\r\n        method: \"post\",\r\n        data: {\r\n          amount: priceStripe,\r\n          paymentMethod: paymentMethod,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setProcessing(false);\r\n          alert(\"Your payment was successful\");\r\n          clearCart();\r\n          history.push(\"/\");\r\n        })\r\n        .catch((error) => console.log(\"payment error\", error));\r\n    }\r\n  };\r\n  return (\r\n    <form className=\"Form\" onSubmit={handleSubmit}>\r\n      <fieldset className=\"FormGroup\">\r\n        <Field\r\n          label=\"Name\"\r\n          id=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Jane Doe\"\r\n          required\r\n          autoComplete=\"name\"\r\n          value={billingDetails.name}\r\n          onChange={(e) =>\r\n            setBillingDetails({ ...billingDetails, name: e.target.value })\r\n          }\r\n        />\r\n        <Field\r\n          label=\"Email\"\r\n          id=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"janedoe@gmail.com\"\r\n          required\r\n          autoComplete=\"email\"\r\n          value={billingDetails.email}\r\n          onChange={(e) => {\r\n            setBillingDetails({ ...billingDetails, email: e.target.value });\r\n          }}\r\n        />\r\n        <Field\r\n          label=\"Phone\"\r\n          id=\"phone\"\r\n          type=\"tel\"\r\n          placeholder=\"(941) 555-0123\"\r\n          required\r\n          autoComplete=\"tel\"\r\n          value={billingDetails.phone}\r\n          onChange={(e) => {\r\n            setBillingDetails({ ...billingDetails, phone: e.target.value });\r\n          }}\r\n        />\r\n      </fieldset>\r\n      <fieldset className=\"FormGroup\">\r\n        <CardField\r\n          onChange={(e) => {\r\n            setError(e.error);\r\n            setCardComplete(e.complete);\r\n          }}\r\n        />\r\n      </fieldset>\r\n      {error && <ErrorMessage>{error.message}</ErrorMessage>}\r\n      <SubmitButton\r\n        processing={processing}\r\n        error={error}\r\n        disabled={!stripe}\r\n        onClick={startPayment()}\r\n      >\r\n        Pay\r\n      </SubmitButton>\r\n    </form>\r\n  );\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  clearCart: () => dispatch(clearCart()),\r\n  startPayment: () => dispatch(paymentStart()),\r\n});\r\nexport default connect(null, mapDispatchToProps)(withRouter(CheckoutForm));\r\n"]},"metadata":{},"sourceType":"module"}